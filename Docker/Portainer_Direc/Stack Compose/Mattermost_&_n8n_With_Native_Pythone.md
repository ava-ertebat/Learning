# 🐍 راهنمای پیاده‌سازی n8n با پایتون بومی و کتابخانه‌های خارجی (Production-Ready)

این راهنما فرآیند راه‌اندازی Task Runner پایتون بومی در n8n را با استفاده از **ایمیج داکر سفارشی** برای نصب امن کتابخانه‌های خارجی (مانند requests و pandas) توضیح می‌دهد.

## ساختار و پیش‌نیازها

* **هدف:** فعال‌سازی نود **Python (Native) (Beta)** در n8n برای استفاده از کتابخانه‌های خارجی.
* **رویکرد:** استفاده از Task Runnerهای جداگانه و ساخت یک ایمیج سفارشی.
* **ابزارها:** **CLI** (برای ساخت ایمیج) و **Portainer** (برای مدیریت Stack).
* **نسخه استفاده شده:** 1.80.3
* **رمز احراز هویت مشترک:** Swordfish641@ (توجه: در محیط Production واقعی، حتماً این رمز را تغییر دهید).

---

## 🛠️ گام ۱: ایجاد و ساخت ایمیج Task Runner سفارشی (با CLI)

برای یک محیط تولیدی امن، کتابخانه‌های خارجی باید در زمان ساخت ایمیج در آن نصب شوند.

### ۱.۱. ایجاد فایل `Dockerfile.runners`

یک فایل به نام `Dockerfile.runners` در سرور داکر خود ایجاد کنید:

```dockerfile
# Dockerfile.runners
# پایه را از ایمیج رسمی runners با تگ منطبق با n8n اصلی شما (1.80.3) قرار می‌دهیم
FROM docker.arvancloud.ir/n8nio/runners:1.80.3

# تغییر کاربر به root برای نصب پکیج‌ها
USER root

# 🚨 نصب کتابخانه‌های خارجی مورد نیاز شما
# توصیه می‌شود نسخه‌ها را برای پایداری در Production پین کنید
RUN pip install requests==2.31.0 pandas==2.2.2

# بازگشت به کاربر node
USER node
